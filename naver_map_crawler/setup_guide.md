# 네이버 지도 크롤러 설정 가이드

## 🚀 프로젝트 개요

Playwright를 사용한 네이버 지도 장소 정보 크롤러입니다.

## 📁 프로젝트 구조

```
naver_map_crawler/
├── crawler.py          # 메인 크롤러 클래스
├── config.py           # 설정 파일
├── utils.py            # 유틸리티 함수
├── test_crawler.py     # 기본 테스트
├── demo_crawler.py     # 간단 데모
├── requirements.txt    # 의존성
├── README.md          # 기본 문서
└── setup_guide.md     # 이 파일
```

## 🛠️ 설치 방법

### 1. Python 환경 확인
```bash
python --version  # Python 3.8+ 필요
```

### 2. 의존성 설치
```bash
pip install playwright openpyxl
```

### 3. Playwright 브라우저 설치
```bash
playwright install chromium
```

## 🔧 사용법

### 기본 크롤러 실행
```bash
python crawler.py
```

### 데모 테스트
```bash
python demo_crawler.py
```

## ⚠️ 중요 사항

### 현재 상태
- **구현 완료**: 전체 코드 구조 및 로직
- **테스트 상태**: 네이버의 봇 감지로 인한 제한 확인됨
- **대안 필요**: 실제 사용을 위해서는 추가 우회 방법 필요

### 봇 감지 문제
네이버 지도는 자동화된 접근을 감지하여 차단합니다:
- Captcha 표시
- 빈 결과 반환
- 페이지 리디렉션

### 해결 방안
1. **프록시 로테이션**: 다양한 IP 사용
2. **User-Agent 변경**: 더 다양한 브라우저 시뮬레이션
3. **세션 관리**: 쿠키 및 세션 상태 유지
4. **시간 간격 조정**: 더 긴 딜레이 적용
5. **헤드리스 모드 해제**: 실제 브라우저 모드 사용

## 📊 출력 데이터 형식

성공적으로 실행될 경우 다음 데이터가 수집됩니다:

| 필드 | 설명 |
|------|------|
| 지역 | 검색 지역 |
| 키워드 | 검색 키워드 |
| 가게명 | 장소명 |
| 주소 | 주소 정보 |
| 평점 | 평점 (있는 경우) |
| 전화번호 | 연락처 |
| 카테고리 | 업종 |
| 크롤링_시간 | 수집 시간 |

## 📝 파일 설정

### config.py 수정 포인트
- `LOCATIONS`: 크롤링 대상 지역
- `KEYWORDS`: 검색 키워드
- `DELAY_RANGE`: 요청 간 딜레이
- `BROWSER_CONFIG`: 브라우저 설정

### utils.py 기능
- 전화번호 정제
- 파일 저장
- 로깅
- 데이터 검증

## 🔒 법적 고지

- 네이버 서비스 약관 준수 필요
- robots.txt 확인 및 준수
- 상업적 사용 전 법적 검토 필요
- Rate limiting 및 딜레이 필수

## 🐛 트러블슈팅

### 브라우저 크래시
- 메모리 부족: `--max-old-space-size` 옵션 추가
- WSL 환경: GUI 지원 확인

### 검색 결과 없음
- 네이버 봇 감지 활성화 상태
- 프록시 또는 VPN 사용 고려
- 수동 테스트로 사이트 접근성 확인

### 인코딩 오류
- UTF-8 BOM으로 CSV 저장
- Windows 환경에서 cp949 인코딩 이슈 가능

## 📈 향후 개선사항

1. **봇 감지 우회 강화**
2. **데이터베이스 연동**
3. **GUI 인터페이스 추가**
4. **실시간 모니터링**
5. **API 서버 구성**